<style>
	.heading-section > span, h2, p, a {
		font-family: "Poppins", Arial, sans-serif;
	} 
	.majoraddr{
		display:flex;
	}
	
	#addrshort{
		background:white;
		border:0.05rem solid #769BCD;
		border-radius:0.6rem;
		padding-left:0.3rem;
		padding-right:0.3rem;
		display:inline-block;
	}
	
	#addrshort span{
		color:#769BCD;
	}
	
	#tname h3{
		margin-top:0.5rem;
		margin-bottom:0;
	}
	
	#tgymname{
		color:#343434;
		font-style:bold;
	}
	
	.btn btn-primary py-2 px-4:hover{
		background-color:white;
	}
</style>

<script th:inline="javascript">

function GetTarget(j){
	$.ajax({
		url:'/trainers/findpage',
		data:{
			'pageNo':j,
		},
		method:'GET',
		success: function(result){
			$('#div_trainer_row').empty();
			$('#div_trainer_row').append(result);
			
			var currentPage = j;
			var totalData = [[${totalData}]];
			var limitPerPage = [[${amount}]]; // 페이지당 데이터 수
			var pageSize = 5; // 화면에 표시될 페이지 수
			var totalPages = Math.ceil(totalData / limitPerPage);
			var pageGroup = Math.ceil(currentPage / pageSize); // 페이지 그룹
			var last = pageGroup * pageSize;
			
			if(currentPage <= 0){
				currentPage = 1;
			}
			if(last > totalPages){
				last = totalPages;
			}
			
			var first = last - (pageSize - 1);
			const next = last + 1;
			var prev = first - 1;
			
			if(totalPages < 1){
				first = last;
			}
			
			var pages = $('#pages');
			pages.empty();
			
			if(first > 1){
				pages.append('<li><a onclick="GetTarget('+ first +')">prev</a></li>');
			}
			
			for (var k = first; k <= last; k++) {
				
				if(currentPage == k){
					pages.append('<li class="active"><a onclick="GetTarget(' + k + ');"' + '>' + k + '</a></li>');
				}else if(k > 0){
					pages.append('<li><a onclick="GetTarget('+ k +')">' + k + '</a></li>');
					};
				}
			
			if(next > pageSize && next <= totalPages){
				pages.append('<li><a onclick="GetTarget(' + next + ')">next</a></li>');
			};
			
		}
		
	});
	
	history.pushState({
		data:'/trainers/findpage',
		pageNo: j
	}, // state
	null, // title
	'/trainers/list?pageNo=' + j); // url
}

	$(window).on('popstate', function(event){
		window.location = document.location.href;

	});



function paging(totalData, currentPage){
	
		/* 변수 totalData: 전체 데이터 수(Back에서 받아옴)*/
		var totalData = [[${totalData}]];
		var currentPage = [[${currentPage}]];
		var limitPerPage = [[${amount}]]; // 페이지당 데이터 수
		var pageSize = 5; // 화면에 표시될 페이지 수
		var totalPages = Math.ceil(totalData / limitPerPage);
		var pageGroup = Math.ceil(currentPage / pageSize); // 페이지 그룹
		var last = pageGroup * pageSize;
		
		if(currentPage <= 0){
			currentPage = 1;
		}
		if(last > totalPages){
			last = totalPages;
		}
		
		var first = last - (pageSize - 1);
		const next = last + 1;
		var prev = first - 1;
		
		if(totalPages < 1){
			first = last;
		}
		
		var pages = $('#pages');
		pages.empty();
		
		// prev 버튼
		if(first > 1){
			pages.append('<li><a onclick="GetTarget('+ first +')">prev</a></li>');
		}
		
		// 페이지 숫자
		for (var j = first; j <= last; j++) {
			
			if(currentPage == j){
				pages.append('<li class="active"><a onclick="GetTarget(' + j + ');"' + '>' + j + '</a></li>');
			}else if(j > 0){
				pages.append('<li><a onclick="GetTarget('+ j +')">' + j + '</a></li>');
				};
			}
		
		// next 버튼
		if(next > pageSize && next <= totalPages){
			pages.append('<li><a onclick="GetTarget(' + next + ')">next</a></li>');
		};
	
	}
	
	$(function(){
		paging();
	});
</script>

<section class="ftco-section">

	<div class="row justify-content-center mb-5 pb-3">
       <div class="col-md-7 heading-section text-center ftco-animate">
          <span class="subheading">Trainers</span>
          <h2 class="mb-4">트레이너</h2>
          <p>당근PT가 보증하는 현직 트레이너들!</p>
          <div>
			 <a href="#" id="btn_findmytrainer" class="btn btn-primary py-2 px-4">맞춤 트레이너 찾기(Click!)</a>
		 </div>
       </div>
       	
	</div>

	<div class="container">
		<div class="row">
		<!-- Left Start -->
			<div class="col-lg-9 pr-lg-4">
				<div class="row" id="div_trainer_row">
				<div id="div_trainer_replace" th:replace="${trcenter_info} ? ${trcenter_info} : trcenter_info">
				</div>
					
				<!-- Single Trainer Start -->
					
				<!-- Single Trainer End -->
				</div>
				<!-- Page Number Start -->
				<div class="row mt-5">
					<div class="col text-center">
						<div class="block-27">
							<ul id="pages">
							</ul>
						</div>
					</div>
				</div>
				<!-- Page Number End -->
			</div>
		<!-- Left End -->
		<!-- Right Start -->
	
			<div class="col-lg-3 p-4 bg-light">
			
			
				<div class="search-wrap-1 ftco-animate">
					<h2 class="mb-3">Find Places</h2>
					<form action="#" class="search-property-1">
						<div class="row">
							<div class="col-lg-12 align-items-end mb-3">
								<div class="form-group">
									<label for="#">지역별 검색</label>
									<div class="form-field">
										<div class="icon">
											<span class="ion-ios-search"></span>
										</div>
										<form>
											<input type="text" class="form-control"
											placeholder="Search place">
										</form>
									</div>
								</div>
							</div>
							
							<div class="col-lg-12 align-items-end mb-3">
								<div class="form-group">
									<label for="#">운동별 검색</label>
									<div class="form-field">
										<div class="select-wrap">
											<div class="icon">
												<span class="ion-ios-arrow-down"></span>
											</div>
											<select name="" id="" class="form-control">
												<option th:each="m : ${majors}" th:value="${m.major}"></option>
											</select>
										</div>
									</div>
								</div>
							</div>
							<div class="col-lg-12 align-self-end">
								<div class="form-group">
									<div class="form-field">
										<input type="submit" value="Search"
											class="form-control btn btn-primary">
									</div>
								</div>
							</div>
						</div>
					</form>
				</div>
			</div>
		<!-- Right End -->
		</div>
	</div>
</section>


